{% extends 'patient/base.html' %}
{% load static %}

{% block body %}

<div id="content-wrapper">
    <div class="container-fluid">
        <!-- Icon Cards-->
        <div class="row justify-content-center">
            <div class="card-body">
                <!-- popup.html -->

                <div id="popup-modal" class="popup-modal">
                    <div class="popup-content">
                        <h1 class="title">Confirm Appointment</h1>
                        <!-- Add your success message here if needed -->
                        {% comment %}
                        <p>{{ success_message }}</p>
                        {% endcomment %}
                    </div>
                    <small class="text-muted mb-3">
                        Pay â‚¹200 to confirm the Appointment
                    </small>
                    <div class="text-center">
                        <!-- Payment Button -->
                        <button class="btn btn-primary btn-lg" id="pay-btn">PAY</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Razorpay's Javascript code. -->
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    var options = {
        // Enter the Key ID generated from the Dashboard
        key: "{{ razorpay_merchant_key }}",
        // Amount is in currency subunits.
        // Default currency is INR. Hence,
        // 50000 refers to 50000 paise
        amount: "{{ razorpay_amount }}",
        currency: "{{ currency }}",
        // Your/store name.
        name: "Dj Razorpay",
        // Pass the `id` obtained in the response of Step 1
        order_id: "{{ razorpay_order_id }}",
        callback_url: "{{ callback_url }}",
    };

    // initialise razorpay with the options.
    var rzp1 = new Razorpay(options);

    // add event listener to the payment button.
    document.getElementById("pay-btn").onclick = function (e) {
        rzp1.open();
        e.preventDefault();
    };
</script>

{% endblock %}
